{"ast":null,"code":"var _jsxFileName = \"/Users/ali/Downloads/blood-bank-main/src/routes/Donors.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { getDatabase, ref, set } from \"firebase/database\";\nimport { loginContext } from \"../context/context\";\nimport InputField from '../components/InputField';\nimport { validateUserName } from \"../utils/utils\"; // import Loader from '../components/Loader';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Userdonor = () => {\n  _s();\n\n  const location = () => {\n    return new Promise((resolve, reject) => {\n      window.navigator.geolocation.getCurrentPosition(geoLocation => {\n        console.log(geoLocation);\n        resolve(geoLocation);\n      }, error => {\n        reject(error);\n      });\n    });\n  };\n\n  const {\n    login,\n    user\n  } = useContext(loginContext);\n  console.log(\"user\", user);\n\n  function writeUserData(userId, userName, email, imageUrl) {\n    const db = getDatabase();\n    set(ref(db, 'users/' + userId), {\n      username: userName,\n      email: email,\n      profile_picture: imageUrl\n    });\n  }\n\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (!login || !user) {\n      history.replace(\"login\");\n    }\n  }, [login, user]);\n  const history = useHistory();\n  const [message, setMessage] = useState(\"\");\n  const [color, setColor] = useState(\"\");\n  const [donorData, setDonorData] = useState({\n    name: '',\n    email: user.mail,\n    phone: \"\",\n    bloodGroup: 'O'\n  });\n  const [errorTypeName, setErrorTypeName] = useState(\"\");\n\n  const change = event => {\n    setMessage(\"\");\n    event.preventDefault();\n    const {\n      name,\n      value\n    } = event.target;\n    setDonorData(preVal => {\n      return { ...preVal,\n        [name]: value\n      };\n    });\n  }; // Save this as fetch.js --------------------------------------------------------------------------\n\n\n  const click = async () => {\n    try {\n      const nameError = validateUserName(donorData.name);\n\n      if (nameError !== \"\") {\n        setErrorTypeName(nameError);\n      } else {\n        setErrorTypeName(\"\");\n        const geo = await location();\n        console.log({\n          geo\n        });\n        writeUserData(user.id, {\n          name: donorData.name,\n          phone: donorData.phone,\n          bloodGroup: donorData.bloodGroup,\n          location: geo\n        }, user.mail, \"\");\n        setDonorData({\n          name: '',\n          email: user.mail,\n          phone: '',\n          bloodGroup: 'O'\n        });\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-40 box-shadow-ccc b-1-c9 p-4 m-3-auto d-flex flex-direction-column align-items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `${color} f-014 mb-2`,\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(InputField, {\n        type: \"text\",\n        onChange: change,\n        error: errorTypeName,\n        name: \"name\",\n        placeholder: \"Name\",\n        value: donorData.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(InputField, {\n        type: \"email\",\n        placeholder: \"Email\",\n        value: user.mail,\n        disabled: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(InputField, {\n        type: \"number\",\n        onChange: change,\n        name: \"phone\",\n        value: donorData.phone,\n        placeholder: \"phone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-100per mt-1 d-flex flex-direction-row j-content-spacearound\",\n        onChange: change,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \" Blood group : \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cursor-pointer mt-06 mr-02\",\n            type: \"radio\",\n            value: \"O\",\n            name: \"bloodGroup\",\n            checked: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this), \" O\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cursor-pointer mt-06 mr-02\",\n            type: \"radio\",\n            value: \"A\",\n            name: \"bloodGroup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this), \" A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cursor-pointer mt-06 mr-02\",\n            type: \"radio\",\n            value: \"B\",\n            name: \"bloodGroup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }, this), \" B\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cursor-pointer mt-06 mr-02\",\n            type: \"radio\",\n            value: \"AB\",\n            name: \"bloodGroup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }, this), \" AB\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          click();\n        },\n        className: \"f-bold f-family-monospace f-017 bg-white outline-none b-none green mb-2 mt-2 cursor-pointer\",\n        children: \" Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(Userdonor, \"q4Uxr8oXePilKiZ1KQCTS5hkUHE=\", false, function () {\n  return [useHistory];\n});\n\n_c = Userdonor;\nexport default Userdonor;\n\nvar _c;\n\n$RefreshReg$(_c, \"Userdonor\");","map":{"version":3,"sources":["/Users/ali/Downloads/blood-bank-main/src/routes/Donors.jsx"],"names":["React","useState","useEffect","useContext","useHistory","getDatabase","ref","set","loginContext","InputField","validateUserName","Userdonor","location","Promise","resolve","reject","window","navigator","geolocation","getCurrentPosition","geoLocation","console","log","error","login","user","writeUserData","userId","userName","email","imageUrl","db","username","profile_picture","loading","setLoading","history","replace","message","setMessage","color","setColor","donorData","setDonorData","name","mail","phone","bloodGroup","errorTypeName","setErrorTypeName","change","event","preventDefault","value","target","preVal","click","nameError","geo","id","err"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { getDatabase, ref, set } from \"firebase/database\";\nimport { loginContext } from \"../context/context\";\nimport InputField from '../components/InputField';\nimport {\n    validateUserName,\n} from \"../utils/utils\";\n// import Loader from '../components/Loader';\nconst Userdonor = () => {\n    const location =  () =>{\n        return new Promise((resolve, reject) => {\n            window.navigator.geolocation.getCurrentPosition((geoLocation) => {\n                console.log(geoLocation)\n                  resolve(geoLocation)\n               },(error) => {\n                   reject(error)\n               });\n\n        })\n        \n    }\n    const { login, user } = useContext(loginContext);\n    console.log(\"user\", user)\n\n    function writeUserData(userId, userName, email, imageUrl) {\n        const db = getDatabase();\n        set(ref(db, 'users/' + userId), {\n          username: userName,\n          email: email,\n          profile_picture : imageUrl\n        });\n      }\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        if (!login || !user) {\n            history.replace(\"login\")\n        }\n    }, [login, user])\n\n\n    const history = useHistory();\n    const [message, setMessage] = useState(\"\");\n    const [color, setColor] = useState(\"\");\n    const [donorData, setDonorData] = useState({\n        name: '',\n        email: user.mail,\n        phone: \"\",\n        bloodGroup: 'O',\n    });\n\n    const [errorTypeName, setErrorTypeName] = useState(\"\");\n\n    const change = (event) => {\n        setMessage(\"\")\n        event.preventDefault();\n        const { name, value } = event.target;\n        setDonorData((preVal) => {\n            return { ...preVal, [name]: value }\n        })\n\n    }\n\n\n    // Save this as fetch.js --------------------------------------------------------------------------\n\n    const click = async() => {\n\n        try{\n        const nameError = validateUserName(donorData.name);\n       \n        if (nameError !== \"\") {\n            setErrorTypeName(nameError)\n\n        }else {\n\n            setErrorTypeName(\"\");\n            const geo = await  location();\n            console.log({geo})\n            writeUserData(user.id,{name : donorData.name, phone : donorData.phone, bloodGroup : donorData.bloodGroup, location : geo }, user.mail, \"\")\n            \n              setDonorData({\n                name: '',\n                email: user.mail,\n                phone: '',\n                bloodGroup: 'O',\n              });\n\n        }\n    }catch(err){\n        console.log(err)\n    }\n    }\n\n    return <>\n\n        <div className=\"w-40 box-shadow-ccc b-1-c9 p-4 m-3-auto d-flex flex-direction-column align-items-center\">\n\n            <span className={`${color} f-014 mb-2`}>{message}</span>\n            <InputField type=\"text\" onChange={change} error={errorTypeName} name='name' placeholder=\"Name\" value={donorData.name} />\n            <InputField type=\"email\"  placeholder=\"Email\" value={user.mail} disabled/>\n            <InputField  type=\"number\" onChange={change}  name='phone' value={donorData.phone} placeholder=\"phone\" />\n            \n            <div className=\"w-100per mt-1 d-flex flex-direction-row j-content-spacearound\" onChange={change}>\n                <label> Blood group : </label>\n                <div>\n                <input className=\"cursor-pointer mt-06 mr-02\" type=\"radio\" value=\"O\" name=\"bloodGroup\" checked /> O\n                </div>\n                <div>\n                <input className=\"cursor-pointer mt-06 mr-02\" type=\"radio\" value=\"A\" name=\"bloodGroup\" /> A\n                </div>\n                <div>\n                <input className=\"cursor-pointer mt-06 mr-02\" type=\"radio\" value=\"B\" name=\"bloodGroup\" /> B\n                </div>\n                <div>\n                <input className=\"cursor-pointer mt-06 mr-02\" type=\"radio\" value=\"AB\" name=\"bloodGroup\" /> AB\n                </div>\n                \n            </div>\n\n            <button onClick={() => { click() }} className=\"f-bold f-family-monospace f-017 bg-white outline-none b-none green mb-2 mt-2 cursor-pointer\"> Submit</button>\n\n\n        </div>\n\n\n\n    </>\n}\nexport default Userdonor;"]},"metadata":{},"sourceType":"module"}