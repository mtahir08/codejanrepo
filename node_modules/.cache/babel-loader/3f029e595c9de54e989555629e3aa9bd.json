{"ast":null,"code":"var _jsxFileName = \"/Users/ali/Downloads/blood-bank-main/src/routes/UserLogin.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { NavLink } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\nimport { getLocalStorage, setLocalStorage } from \"../utils/utils\";\nimport Loader from \"../components/Loader\";\nimport { loginContext } from \"../context/context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UserLogin = () => {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const {\n    login,\n    setLogin,\n    user,\n    setUser\n  } = useContext(loginContext);\n  const [message, setMessage] = useState(\"\");\n  const history = useHistory();\n  let [inputData, setInputData] = useState({\n    email: '',\n    password: ''\n  });\n  useEffect(() => {\n    if (login && user) {\n      history.replace(\"/\");\n    }\n  }, [login, user]);\n\n  const change = event => {\n    setMessage(\"\");\n    event.preventDefault();\n    let {\n      name,\n      value\n    } = event.target;\n    setInputData(preVal => {\n      return { ...preVal,\n        [name]: value\n      };\n    });\n  };\n\n  const click = () => {\n    setLoading(pre => !pre); // firebase api fetching\n\n    const auth = getAuth();\n    signInWithEmailAndPassword(auth, inputData.email, inputData.password).then(res => {\n      if (res === null || res === void 0 ? void 0 : res.user) {\n        setLocalStorage(\"__USER__\", {\n          mail: res.user.email,\n          id: res.user.uid\n        });\n        setUser(getLocalStorage(\"__USER__\"));\n        setLocalStorage('Islogin', res.user.accessToken);\n        setLogin(getLocalStorage(\"Islogin\"));\n        setInputData({\n          email: '',\n          password: ''\n        });\n        history.push('/');\n      }\n    }).catch(error => {\n      const errorCode = error.code;\n      setMessage(errorCode);\n    }).finally(() => {\n      setLoading(pre => !pre);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-40 box-shadow-ccc b-1-c9 p-4 m-3-auto d-flex flex-direction-column align-items-center\",\n      children: loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"f-014 mb-2 red\",\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 32\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          onChange: change,\n          name: \"email\",\n          className: \"input f-014 mb-2  f-family-monospace\",\n          value: inputData.email,\n          placeholder: \"E-mail-Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          onChange: change,\n          name: \"password\",\n          className: \"input f-014 mb-2 f-family-monospace\",\n          value: inputData.password,\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            cursor: !inputData.email || !inputData.password ? \"not-allowed\" : \"pointer\"\n          },\n          onClick: () => {\n            click();\n          },\n          className: \"f-bold f-family-monospace f-017 bg-white outline-none b-none green mb-2 \",\n          disabled: !inputData.email || !inputData.password,\n          children: \" Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/signup\",\n          className: \"f-bold f-family-monospace nav-link  bg-white outline-none b-none brown\",\n          children: \" Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(UserLogin, \"GY0gTO2wC16KjsCsxUpMyFmvlFg=\", false, function () {\n  return [useHistory];\n});\n\n_c = UserLogin;\nexport default UserLogin;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserLogin\");","map":{"version":3,"sources":["/Users/ali/Downloads/blood-bank-main/src/routes/UserLogin.jsx"],"names":["React","useState","useContext","useEffect","NavLink","useHistory","getAuth","signInWithEmailAndPassword","getLocalStorage","setLocalStorage","Loader","loginContext","UserLogin","loading","setLoading","login","setLogin","user","setUser","message","setMessage","history","inputData","setInputData","email","password","replace","change","event","preventDefault","name","value","target","preVal","click","pre","auth","then","res","mail","id","uid","accessToken","push","catch","error","errorCode","code","finally","cursor"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { NavLink } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\nimport { getLocalStorage, setLocalStorage } from \"../utils/utils\";\nimport Loader from \"../components/Loader\";\nimport { loginContext } from \"../context/context\";\n\nconst UserLogin = () => {\n    const [loading, setLoading] = useState(false);\n    const { login, setLogin,user, setUser } = useContext(loginContext);\n\n    const [message, setMessage] = useState(\"\");\n    const history = useHistory();\n\n    let [inputData, setInputData] = useState({\n        email: '',\n        password: '',\n    });\n\n    useEffect(() => {\n        if (login && user) {\n            history.replace(\"/\")\n        }\n    }, [login,user])\n\n    const change = (event) => {\n        setMessage(\"\")\n        event.preventDefault();\n        let { name, value } = event.target;\n        setInputData((preVal) => {\n            return { ...preVal, [name]: value }\n        })\n\n    }\n\n    const click = () => {\n        setLoading((pre) => !pre);\n\n        // firebase api fetching\n\n        const auth = getAuth();\n        signInWithEmailAndPassword(auth, inputData.email, inputData.password)\n            .then((res) => {\n                if (res?.user) {\n                    setLocalStorage(\"__USER__\", {mail : res.user.email, id : res.user.uid})\n                    setUser(getLocalStorage(\"__USER__\"))\n                    setLocalStorage('Islogin', res.user.accessToken);\n                    setLogin(getLocalStorage(\"Islogin\"))\n                    setInputData({\n                        email: '',\n                        password: '',\n                    })\n                    history.push('/')\n\n                }\n            })\n            .catch((error) => {\n                const errorCode = error.code;\n                setMessage(errorCode)\n\n            })\n            .finally(() => {\n                setLoading(pre => !pre)\n            })   \n    }\n\n    return <>\n\n\n        <div className=\"w-40 box-shadow-ccc b-1-c9 p-4 m-3-auto d-flex flex-direction-column align-items-center\">\n\n            {loading ?\n                <Loader /> : <><span className=\"f-014 mb-2 red\">{message}</span>\n                    <input type=\"email\" onChange={change} name='email' className=\"input f-014 mb-2  f-family-monospace\" value={inputData.email} placeholder=\"E-mail-Address\" />\n                    <input type='password' onChange={change} name='password' className=\"input f-014 mb-2 f-family-monospace\" value={inputData.password} placeholder=\"Password\" />\n                    <button\n                        style={{ cursor: (!inputData.email || !inputData.password) ? \"not-allowed\" : \"pointer\" }}\n                        onClick={() => { click() }}\n                        className=\"f-bold f-family-monospace f-017 bg-white outline-none b-none green mb-2 \" disabled={!inputData.email || !inputData.password}> Submit</button>\n                    <NavLink to='/signup' className=\"f-bold f-family-monospace nav-link  bg-white outline-none b-none brown\"> Register</NavLink></>}\n\n        </div>\n\n\n    </>\n}\n\nexport default UserLogin;"]},"metadata":{},"sourceType":"module"}